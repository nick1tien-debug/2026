<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
  <title>L√å X√å T·∫æT 2026 - B√ìC BAO L√å X√å</title>
  <style>
    /* to√†n b·ªô CSS gi·ªëng nh∆∞ b·∫£n tr∆∞·ªõc */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI','Roboto',sans-serif; }
    body { background:linear-gradient(145deg,#a32020,#cf3f3f); min-height:100vh; padding:20px; display:flex; justify-content:center; align-items:center; position:relative; }
    body::before { content:"üå∏"; position:absolute; top:10px; left:20px; font-size:60px; opacity:0.2; transform:rotate(-10deg); }
    body::after { content:"üéã"; position:absolute; bottom:20px; right:20px; font-size:70px; opacity:0.2; transform:rotate(15deg); }
    .container { max-width:1200px; width:100%; background:rgba(255,241,184,0.9); backdrop-filter:blur(10px); border-radius:50px 50px 30px 30px; padding:30px 25px; border:4px solid #ffc107; box-shadow:0 20px 40px rgba(0,0,0,0.4); position:relative; z-index:20; }
    .title { text-align:center; color:#b22222; text-shadow:4px 4px 0 #ffd700; font-size:48px; font-weight:900; letter-spacing:8px; margin-bottom:10px; }
    .sub-title { text-align:center; background:#ffd966; padding:12px 25px; border-radius:50px; display:inline-block; margin:0 auto 25px; font-size:26px; font-weight:bold; color:#7a1f1f; border:3px dashed #c92a2a; }
    .login-section { background:#ffedb0; padding:30px; border-radius:60px 20px 60px 20px; border:4px solid #d4af37; margin-bottom:30px; }
    .form-row { display:flex; flex-wrap:wrap; align-items:center; justify-content:center; gap:15px; margin-bottom:15px; }
    .form-row label { font-size:24px; font-weight:700; color:#a52a2a; min-width:140px; }
    .form-row input { padding:16px 24px; font-size:20px; border:3px solid #e63946; border-radius:60px; outline:none; width:300px; max-width:100%; background:#fffef7; color:#2d1e1e; font-weight:500; }
    .btn { background:#e63946; color:#ffe066; border:none; padding:16px 40px; font-size:26px; font-weight:bold; border-radius:60px; cursor:pointer; border-bottom:8px solid #9d2020; transition:0.05s linear; box-shadow:0 8px 0 #6e1a1a; }
    .btn:active { transform:translateY(8px); box-shadow:0 2px 0 #6e1a1a; border-bottom-width:2px; }
    .btn-small { font-size:20px; padding:12px 24px; border-bottom-width:6px; }
    .lixi-area { margin-top:30px; text-align:center; }
    .lixi-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:20px; margin:30px 0; }
    .bao { background:#fdde5c; background:radial-gradient(circle at 30% 20%, #ffe28c, #e6b422); border-radius:20px 20px 30px 30px; aspect-ratio:1/1.2; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:52px; border:5px solid #b8860b; box-shadow:0 12px 0 #7a4d1a, 0 12px 20px rgba(0,0,0,0.3); cursor:pointer; transition:0.07s; color:#8b1a1a; }
    .bao span { background:#fffbe6; padding:8px 18px; border-radius:40px; font-size:18px; font-weight:bold; border:2px solid red; margin-top:8px; }
    .bao:hover { transform:scale(1.06); background:#ffd700; border-color:#ffaa33; }
    .bao.disabled, .bao:disabled { opacity:0.45; pointer-events:none; filter:grayscale(0.7); box-shadow:0 6px 0 #5a3a1e; }
    .bao.boc-ro { background:#ffe4b5; border:4px dashed #ff3333; }
    .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:9999; visibility:hidden; opacity:0; transition:0.2s; }
    .modal-overlay.show { visibility:visible; opacity:1; }
    .modal-content { background:#fff3cd; border:10px solid #ffb347; border-radius:70px 20px 70px 20px; padding:40px 60px; text-align:center; box-shadow:0 25px 0 #b26500, 0 30px 50px black; max-width:90%; transform:scale(0.8); transition:0.2s; }
    .modal-overlay.show .modal-content { transform:scale(1); }
    .modal-content .menhgia-lon { font-size:90px; font-weight:900; color:#c0392b; text-shadow:4px 4px 0 #f1c40f; margin:20px 0; word-break:break-word; }
    .close-modal { background:#e63946; color:white; border:none; padding:18px 40px; font-size:28px; border-radius:60px; font-weight:bold; border-bottom:8px solid #921a1a; cursor:pointer; margin-top:20px; }
    .admin-section { margin-top:50px; border-top:5px solid #f39c12; padding-top:30px; }
    .admin-login { background:#2c3e50; padding:20px; border-radius:60px; display:flex; flex-wrap:wrap; justify-content:center; gap:15px; }
    .admin-login input { padding:14px 24px; font-size:18px; border-radius:50px; border:none; }
    .admin-table { width:100%; background:white; border-radius:20px; border:3px solid #daa520; margin-top:20px; }
    .admin-table th { background:#b22222; color:white; padding:12px; font-size:18px; }
    .admin-table td { padding:12px; border-bottom:1px solid #ccc; }
    .hidden { display:none; }
    .error-message { color:#b22222; font-weight:bold; font-size:22px; margin-top:10px; text-align:center; }
    @media (max-width:700px){ .lixi-grid{ grid-template-columns:repeat(2,1fr); } .title{ font-size:40px; } .modal-content .menhgia-lon{ font-size:60px; } }
  </style>
</head>
<body>
<div class="container" id="app">

  <div class="title">üßß T·∫æT 2026 üßß</div>
  <div class="sub-title">B√ìC THƒÇM 1 TRONG 10 BAO</div>

  <!-- ƒêƒÇNG NH·∫¨P -->
  <div id="loginBlock" class="login-section">
    <div style="text-align:center; margin-bottom:20px;">
      <span style="background:#d4af37; padding:10px 30px; border-radius:50px; color:#2c1e1e; font-size:26px;">üîê ƒêƒÇNG NH·∫¨P T√ÄI KHO·∫¢N</span>
    </div>
    <div class="form-row">
      <label>üë§ T√ÄI KHO·∫¢N</label>
      <input type="text" id="username" placeholder="Nh·∫≠p t√†i kho·∫£n" autocomplete="off">
    </div>
    <div class="form-row">
      <label>üîë M·∫¨T KH·∫®U</label>
      <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
    </div>
    <div style="display:flex; justify-content:center; gap:30px; flex-wrap:wrap; margin-top:25px;">
      <button class="btn" id="loginBtn">ƒêƒÇNG NH·∫¨P & B√ìC</button>
    </div>
    <div id="loginError" class="error-message"></div>
  </div>

  <!-- 10 BAO L√å X√å -->
  <div id="bocArea" class="lixi-area hidden">
    <h2 style="color:#a52a2a; font-size:34px; margin-bottom:15px;">üéã CH·ªåN 1 BAO L√å X√å üéã</h2>
    <div id="listBao" class="lixi-grid"></div>
    <button id="logoutBtn" class="btn" style="background:#8b4513; border-bottom-color:#5a2e1a; margin-top:25px;">‚Ü∫ ƒêƒÇNG XU·∫§T</button>
  </div>

  <!-- POPUP K·∫æT QU·∫¢ -->
  <div id="resultModal" class="modal-overlay">
    <div class="modal-content">
      <span style="font-size:70px;">üßß</span>
      <div style="font-size:40px; font-weight:bold; color:#9b1d1d;">CH√öC M·ª™NG</div>
      <div id="modalMenhGia" class="menhgia-lon">1.000ƒë</div>
      <div style="font-size:26px; margin-bottom:10px;">May m·∫Øn ph√°t t√†i üå∏</div>
      <button class="close-modal" id="closeModalBtn">ƒê√ìNG</button>
    </div>
  </div>

  <!-- ADMIN PANEL -->
  <div class="admin-section">
    <div style="text-align:center; margin-bottom:20px;">
      <span style="font-size:40px;">üëë</span>
      <span style="font-size:32px; font-weight:bold; color:#a52a2a;">ADMIN PANEL</span>
    </div>
    <div class="admin-login">
      <input type="password" id="adminPass" placeholder="M·∫≠t kh·∫©u admin">
      <button id="adminLoginBtn" class="btn-small" style="background:#f39c12;">XEM L·ªäCH S·ª¨</button>
      <button id="adminManageUserBtn" class="btn-small" style="background:#16a085;">üìã QU·∫¢N L√ù USER</button>
      <button id="hideAdminBtn" class="btn-small" style="background:#7f8c8d;">·∫®N</button>
    </div>
    <!-- L·ªãch s·ª≠ b√≥c -->
    <div id="adminHistoryPanel" class="hidden" style="margin-top:25px;">
      <h3 style="color:#b03a2e;">üìú L·ªäCH S·ª¨ B√ìC THƒÇM</h3>
      <div style="overflow-x:auto;">
        <table class="admin-table">
          <thead><tr><th>STT</th><th>T√ÄI KHO·∫¢N</th><th>M·ªÜNH GI√Å</th><th>TH·ªúI GIAN</th></tr></thead>
          <tbody id="adminTableBody"></tbody>
        </table>
      </div>
    </div>
    <!-- Qu·∫£n l√Ω user -->
    <div id="adminUserPanel" class="hidden" style="margin-top:25px; background:#fff6d9; padding:25px; border-radius:30px;">
      <h3 style="color:#1e6f5c;">üë• DANH S√ÅCH T√ÄI KHO·∫¢N</h3>
      <div style="display:flex; flex-wrap:wrap; gap:15px; align-items:flex-end; margin-bottom:20px;">
        <div><label>T√†i kho·∫£n:</label><input id="newUsername" placeholder="T√™n ƒëƒÉng nh·∫≠p" style="padding:10px;"></div>
        <div><label>M·∫≠t kh·∫©u:</label><input id="newPassword" type="password" placeholder="M·∫≠t kh·∫©u" style="padding:10px;"></div>
        <button id="addUserBtn" class="btn-small" style="background:#27ae60;">‚ûï TH√äM</button>
      </div>
      <table class="admin-table">
        <thead><tr><th>T√ÄI KHO·∫¢N</th><th>TR·∫†NG TH√ÅI</th><th>H√ÄNH ƒê·ªòNG</th></tr></thead>
        <tbody id="userTableBody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
  // M·ªánh gi√° & t·ªâ l·ªá
  const MENH_GIA = [
    { value: '1.000ƒë', tiLe: 20 },
    { value: '2.000ƒë', tiLe: 20 },
    { value: '5.000ƒë', tiLe: 20 },
    { value: '10.000ƒë', tiLe: 10 },
    { value: '20.000ƒë', tiLe: 10 },
    { value: '50.000ƒë', tiLe: 9 },
    { value: '100.000ƒë', tiLe: 5 },
    { value: '200.000ƒë', tiLe: 5 },
    { value: '500.000ƒë', tiLe: 1 }
  ];
  const RANDOM_POOL = [];
  MENH_GIA.forEach(item => { for (let i = 0; i < item.tiLe; i++) RANDOM_POOL.push(item.value); });

  // Storage keys
  const STORAGE_KEYS = {
    USERS: 'lixi_users',
    DA_BOC: 'lixi_daBoc',
    LICH_SU: 'lixi_lichSu'
  };

  // H√†m ti·ªán √≠ch
  function getUsers() { return JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS)) || []; }
  function setUsers(users) { localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users)); }
  function initDefaultUsers() {
    let users = getUsers();
    if (users.length === 0) {
      users = [
        { username: 'admin', password: 'admin123' },
        { username: 'thanh', password: '123' },
        { username: 'hien', password: '456' },
        { username: 'phuc', password: '789' },
        { username: 'lan', password: '101' }
      ];
      setUsers(users);
    }
  }
  function getDaBoc() { return JSON.parse(localStorage.getItem(STORAGE_KEYS.DA_BOC)) || []; }
  function setDaBoc(arr) { localStorage.setItem(STORAGE_KEYS.DA_BOC, JSON.stringify(arr)); }
  function getLichSu() { return JSON.parse(localStorage.getItem(STORAGE_KEYS.LICH_SU)) || []; }
  function setLichSu(arr) { localStorage.setItem(STORAGE_KEYS.LICH_SU, JSON.stringify(arr)); }

  function kiemTraDangNhap(username, password) {
    const users = getUsers();
    return users.find(u => u.username === username && u.password === password) || null;
  }
  function kiemTraDaBoc(username) { return getDaBoc().includes(username); }
  function themDaBoc(username) {
    const list = getDaBoc();
    if (!list.includes(username)) { list.push(username); setDaBoc(list); }
  }
  function themLichSu(username, menhGia) {
    const lichSu = getLichSu();
    lichSu.push({ username, menhGia, thoiGian: new Date().toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' }) });
    setLichSu(lichSu);
  }
  function randomMenhGia() { return RANDOM_POOL[Math.floor(Math.random() * RANDOM_POOL.length)]; }

  let currentUser = null;
  let daBocHomNay = false;

  function renderBao() {
    const container = document.getElementById('listBao');
    container.innerHTML = '';
    for (let i = 1; i <= 10; i++) {
      const bao = document.createElement('div');
      bao.className = 'bao';
      bao.setAttribute('data-index', i);
      bao.innerHTML = `üßß<span>Bao ${i}</span>`;
      bao.addEventListener('click', () => bocBao(bao));
      container.appendChild(bao);
    }
  }

  function bocBao(baoElement) {
    if (!currentUser) { alert('Vui l√≤ng ƒëƒÉng nh·∫≠p!'); return; }
    if (daBocHomNay) { alert('B·∫°n ƒë√£ b√≥c l√¨ x√¨ r·ªìi! Ch·ªâ ƒë∆∞·ª£c 1 l·∫ßn.'); return; }

    const menhGia = randomMenhGia();
    document.getElementById('modalMenhGia').innerText = menhGia;
    document.getElementById('resultModal').classList.add('show');

    document.querySelectorAll('.bao').forEach(b => {
      b.classList.add('disabled');
      b.style.pointerEvents = 'none';
    });
    baoElement.classList.add('boc-ro');

    themDaBoc(currentUser.username);
    themLichSu(currentUser.username, menhGia);
    daBocHomNay = true;
    console.log(`[ADMIN] ${currentUser.username} b√≥c: ${menhGia}`);
  }

  function handleLogin() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const errorDiv = document.getElementById('loginError');
    if (!username || !password) { errorDiv.innerText = '‚ùå Nh·∫≠p ƒë·∫ßy ƒë·ªß t√†i kho·∫£n v√† m·∫≠t kh·∫©u!'; return; }
    const user = kiemTraDangNhap(username, password);
    if (!user) { errorDiv.innerText = '‚ùå T√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!'; return; }
    if (kiemTraDaBoc(username)) { errorDiv.innerText = '‚ö†Ô∏è T√†i kho·∫£n n√†y ƒë√£ b√≥c l√¨ x√¨ r·ªìi!'; return; }

    errorDiv.innerText = '';
    currentUser = user;
    daBocHomNay = false;
    document.getElementById('loginBlock').style.display = 'none';
    document.getElementById('bocArea').classList.remove('hidden');
    document.querySelectorAll('.bao').forEach(b => {
      b.classList.remove('disabled', 'boc-ro');
      b.style.pointerEvents = 'auto';
    });
    document.getElementById('password').value = '';
  }

  function handleLogout() {
    currentUser = null;
    daBocHomNay = false;
    document.getElementById('loginBlock').style.display = 'block';
    document.getElementById('bocArea').classList.add('hidden');
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    document.getElementById('loginError').innerText = '';
  }

  function closeModal() { document.getElementById('resultModal').classList.remove('show'); }

  function xemLichSuAdmin() {
    const pass = document.getElementById('adminPass').value;
    if (pass !== 'admin2026') { alert('‚ùå Sai m·∫≠t kh·∫©u admin!'); return; }
    document.getElementById('adminUserPanel').classList.add('hidden');
    const lichSu = getLichSu();
    const tbody = document.getElementById('adminTableBody');
    tbody.innerHTML = '';
    if (lichSu.length === 0) {
      tbody.innerHTML = '<tr><td colspan="4" style="padding:25px;">Ch∆∞a c√≥ l∆∞·ª£t b√≥c n√†o.</td></tr>';
    } else {
      lichSu.slice().reverse().forEach((item, idx) => {
        tbody.innerHTML += `<tr><td>${idx+1}</td><td>${item.username}</td><td style="color:#b03a2e;">${item.menhGia}</td><td>${item.thoiGian}</td></tr>`;
      });
    }
    document.getElementById('adminHistoryPanel').classList.remove('hidden');
  }

  function quanLyUser() {
    const pass = document.getElementById('adminPass').value;
    if (pass !== 'admintzu2026') { alert('‚ùå Sai m·∫≠t kh·∫©u admin!'); return; }
    document.getElementById('adminHistoryPanel').classList.add('hidden');
    document.getElementById('adminUserPanel').classList.remove('hidden');
    hienThiDanhSachUser();
  }

  function hienThiDanhSachUser() {
    const users = getUsers();
    const tbody = document.getElementById('userTableBody');
    const daBocList = getDaBoc();
    tbody.innerHTML = '';
    users.forEach(u => {
      const daBoc = daBocList.includes(u.username) ? '‚úÖ ƒê√£ b√≥c' : 'üî¥ Ch∆∞a b√≥c';
      tbody.innerHTML += `<tr>
        <td><strong>${u.username}</strong></td>
        <td>${daBoc}</td>
        <td><button onclick="xoaUser('${u.username}')" class="btn-small" style="background:#c0392b; padding:6px 16px;">XO√Å</button></td>
      </tr>`;
    });
  }

  window.xoaUser = function(username) {
    if (username === 'admin') { alert('Kh√¥ng th·ªÉ xo√° t√†i kho·∫£n admin!'); return; }
    let users = getUsers();
    users = users.filter(u => u.username !== username);
    setUsers(users);
    hienThiDanhSachUser();
    alert(`ƒê√£ xo√° t√†i kho·∫£n ${username}`);
  };

  function themUser() {
    const newUser = document.getElementById('newUsername').value.trim();
    const newPass = document.getElementById('newPassword').value.trim();
    if (!newUser || !newPass) { alert('Nh·∫≠p ƒë·∫ßy ƒë·ªß t√†i kho·∫£n + m·∫≠t kh·∫©u'); return; }
    let users = getUsers();
    if (users.find(u => u.username === newUser)) { alert('T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i!'); return; }
    users.push({ username: newUser, password: newPass });
    setUsers(users);
    document.getElementById('newUsername').value = '';
    document.getElementById('newPassword').value = '';
    hienThiDanhSachUser();
    alert('‚ûï Th√™m user th√†nh c√¥ng!');
  }

  function anAdmin() {
    document.getElementById('adminHistoryPanel').classList.add('hidden');
    document.getElementById('adminUserPanel').classList.add('hidden');
    document.getElementById('adminPass').value = '';
  }

  window.clearAllHistory = function() {
    if (confirm('‚ö†Ô∏è Xo√° t·∫•t c·∫£ d·ªØ li·ªáu b√≥c thƒÉm?')) {
      localStorage.removeItem(STORAGE_KEYS.DA_BOC);
      localStorage.removeItem(STORAGE_KEYS.LICH_SU);
      alert('‚úÖ ƒê√£ xo√° l·ªãch s·ª≠!');
      xemLichSuAdmin();
    }
  };

  window.onload = function() {
    initDefaultUsers();
    renderBao();
    document.getElementById('loginBtn').addEventListener('click', handleLogin);
    document.getElementById('password').addEventListener('keypress', (e) => { if (e.key === 'Enter') handleLogin(); });
    document.getElementById('username').addEventListener('keypress', (e) => { if (e.key === 'Enter') handleLogin(); });
    document.getElementById('logoutBtn').addEventListener('click', handleLogout);
    document.getElementById('closeModalBtn').addEventListener('click', closeModal);
    window.addEventListener('click', (e) => { if (e.target === document.getElementById('resultModal')) closeModal(); });
    document.getElementById('adminLoginBtn').addEventListener('click', xemLichSuAdmin);
    document.getElementById('adminManageUserBtn').addEventListener('click', quanLyUser);
    document.getElementById('hideAdminBtn').addEventListener('click', anAdmin);
    document.getElementById('addUserBtn').addEventListener('click', themUser);
    const clearBtn = document.createElement('button');
    clearBtn.innerText = 'üóëÔ∏è XO√Å TO√ÄN B·ªò L·ªäCH S·ª¨';
    clearBtn.className = 'btn-small';
    clearBtn.style.background = '#c0392b';
    clearBtn.onclick = clearAllHistory;
    document.getElementById('adminHistoryPanel').appendChild(clearBtn);
  };
</script>

<div style="position:fixed; left:5px; bottom:5px; font-size:40px; opacity:0.2;">üèÆ</div>
<div style="position:fixed; right:5px; top:40px; font-size:55px; opacity:0.15;">üå∫</div>
</body>
</html>